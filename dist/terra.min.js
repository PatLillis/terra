!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.terra=t()}}(function(){var t;return function e(t,n,r){function o(u,a){if(!n[u]){if(!t[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(i)return i(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var s=n[u]={exports:{}};t[u][0].call(s.exports,function(e){var n=t[u][1][e];return o(n?n:e)},s,s.exports,e,t,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(t,e){var n=t("./terrarium.js"),r=t("./creature.js");e.exports={Terrarium:n,registerCreature:r.registerCreature,registerCA:r.registerCA}},{"./creature.js":2,"./terrarium.js":5}],2:[function(t,e){var n=t("./util.js"),r=function(){function t(){this.age=-1}function e(){this.age=-1}t.prototype.initialEnergy=50,t.prototype.maxEnergy=100,t.prototype.efficiency=.7,t.prototype.size=50,t.prototype.actionRadius=1,t.prototype.sustainability=2,t.prototype.reproduceLv=.7,t.prototype.moveLv=0,t.prototype.boundEnergy=function(){this.energy>this.maxEnergy&&(this.energy=this.maxEnergy)},t.prototype.isDead=function(){return this.energy<=0},t.prototype.reproduce=function(t){var e=n.filter(t,function(t){return!t.creature});if(e.length){var o=e[n.random(e.length-1)],i=o.coords,u=r.make(this.type),a=function(){return this.energy-=this.initialEnergy,!0}.bind(this),c=this.wait;return{x:i.x,y:i.y,creature:u,successFn:a,failureFn:c}}return!1},t.prototype.move=function(t){var e=this,r=n.filter(t,function(t){return t.creature.size<this.size}.bind(this));if(r.length<this.sustainability&&(r=n.filter(t,function(t){return!t.creature})),r.length){var o=r[n.random(r.length-1)],i=o.coords,u=function(){var t=o.creature.energy*this.efficiency;return this.energy=this.energy+(t||-10),!1}.bind(this);return{x:i.x,y:i.y,creature:e,successFn:u}}return!1},t.prototype.wait=function(){return this.energy-=5,!0},t.prototype.process=function(t){var e={},n=this.maxEnergy;this.energy>n*this.reproduceLv&&this.reproduce?e=this.reproduce(t):this.energy>n*this.moveLv&&this.move&&(e=this.move(t));var r=e.creature;return r?(r.successFn=e.successFn||r.wait,r.failureFn=e.failureFn||r.wait,{x:e.x,y:e.y,creature:r,observed:!0}):this.energy!==this.maxEnergy},e.prototype.actionRadius=1,e.prototype.boundEnergy=function(){},e.prototype.isDead=function(){return!1},e.prototype.process=function(){},e.prototype.wait=function(){};var o={};return{make:function(t,e){var n=o[t];return n?new n(e):!1},registerCreature:function(e,r){var i=e.type;if("string"==typeof i&&"undefined"==typeof o[i]){o[i]="function"==typeof r?function(){this.energy=this.initialEnergy,r.call(this)}:function(){this.energy=this.initialEnergy};var u=e.color||e.colour;return("object"!=typeof u||3!==u.length)&&(e.color=[n.random(255),n.random(255),n.random(255)]),o[i].prototype=new t,o[i].prototype.constructor=o[i],n.each(e,function(t,e){o[i].prototype[e]=t}),o[i].prototype.successFn=o[i].prototype.wait,o[i].prototype.failureFn=o[i].prototype.wait,o[i].prototype.energy=e.initialEnergy,!0}return!1},registerCA:function(t,r){var i=t.type;if("string"==typeof i&&"undefined"==typeof o[i]){o[i]="function"==typeof r?function(){r.call(this)}:function(){};var u=t.color=t.color||t.colour;return("object"!=typeof u||3!==u.length)&&(t.color=[n.random(255),n.random(255),n.random(255)]),t.colorFn=t.colorFn||t.colourFn,o[i].prototype=new e,o[i].prototype.constructor=o[i],n.each(t,function(t,e){o[i].prototype[e]=t}),!0}return!1}}}();e.exports=r},{"./util.js":6}],3:[function(t,e){var n=t("./util.js");e.exports=function(t,e,r,o,i){var u=t.getContext("2d");if(o&&i)u.fillStyle="rgba("+i+","+(1-o)+")",u.fillRect(0,0,t.width,t.height);else{if(o)throw"Background must also be set for trails";u.clearRect(0,0,t.width,t.height)}n.each(e,function(t,e){n.each(t,function(t,n){if(t){var o=t.colorFn?t.colorFn():t.color+","+t.energy/t.maxEnergy;u.fillStyle="rgba("+o+")",t.character?u.fillText(t.character,e*r,n*r+r):u.fillRect(e*r,n*r,r,r)}})})}},{"./util.js":6}],4:[function(t,e){var n=function(t,e,n,r,o,i){function u(){var o=document.createElement("canvas"),u=o.getContext("2d"),a=function(){var t=document.createElement("canvas").getContext("2d"),e=window.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return e/n}();return o.width=t*a,o.height=e*a,o.style.width=t+"px",o.style.height=e+"px",u.scale(a,a),u.font="bold "+n+"px Arial",r&&(o.id=r),i&&(o.style.background="rgb("+i+")"),o}t*=n,e*=n;var a=u();return o?o.parentNode.insertBefore(a,o.nextSibling):document.body.appendChild(a),a};e.exports={createCanvasElement:n}},{}],5:[function(t,e){function n(t,e,n){var o,i;t=Math.ceil(t),e=Math.ceil(e),n=n||{},o=n.cellSize||10,i=n.neighborhood||n.neighbourhood,"string"==typeof i&&(i=i.toLowerCase()),this.width=t,this.height=e,this.cellSize=o,this.trails=n.trails,this.background=n.background,this.canvas=u.createCanvasElement(t,e,o,n.id,n.insertAfter,this.background),this.grid=[],this.nextFrame=!1,this.hasChanged=!1,this.getNeighborCoords=r.getNeighborCoordsFn(t,e,"vonneumann"===i,n.periodic),this.knot=a(this)}var r=t("./util"),o=t("./creature.js"),i=t("./display.js"),u=t("./dom.js"),a=t("knot.js");n.prototype.makeGrid=function(t){for(var e=[],n=typeof t,r=0,i=this.width;i>r;r++){e.push([]);for(var u=0,a=this.height;a>u;u++)e[r].push(o.make("function"===n?t(r,u):"object"===n&&t.length?(t[u]||[])[r]:"string"===n?t:void 0))}return this.knot.emit("grid",e),e},n.prototype.makeGridWithDistribution=function(t){for(var e=[],n=0,i=this.width;i>n;n++){e.push([]);for(var u=0,a=this.height;a>u;u++)e[n].push(o.make(r.pickRandomWeighted(t)))}return this.knot.emit("grid",e),e},n.prototype.step=function(t){function e(t){if(t){var e=r.assign(new t.constructor,t),n=e&&e.isDead();return n&&!d.hasChanged&&(d.hasChanged=!0),e.age++,n&&(h++,p.knot.emit("dead",e)),n?!1:e}return!1}function n(t){return r.map(t,e)}function o(t){return{coords:t,creature:y[t.x][t.y]}}function i(t){var e=t.creature;e?(e.failureFn(),e.boundEnergy()):(t.wait(),t.boundEnergy())}function u(t,e,n){if(t){var u=r.map(d.getNeighborCoords(e,n,t.actionRadius),o),a=t.process(u,e,n);if("object"==typeof a){var c=l[a.x],f=a.creature,s=a.y;c[s]||(c[s]=[]),c[s].push({x:e,y:n,creature:f}),!d.hasChanged&&a.observed&&(d.hasChanged=!0)}else a&&!d.hasChanged&&(d.hasChanged=!0),i(t)}}function a(t,e){r.each(t,function(t,n){u(t,e,n)})}function c(t,e,n){if(t){var o=t.splice(r.random(t.length-1),1)[0],u=o.creature;u.successFn()||(s[o.x][o.y]=!1),u.boundEnergy(),s[e][n]=u,r.each(t,i)}}function f(t,e){r.each(t,function(t,n){c(t,e,n)})}var s,l,p=this,h=0,d=this,y=(this.width,this.height,this.grid);for("number"!=typeof t&&(t=1);t--;)if(this.hasChanged=!1,y=s?r.clone(s):this.grid,s=r.map(y,n),l=this.makeGrid(),r.each(s,a),r.each(l,f),!this.hasChanged)return this.knot.emit("end"),!1;return this.knot.emit("step",h),s},n.prototype.draw=function(){this.knot.emit("beforeDraw"),i(this.canvas,this.grid,this.cellSize,this.trails,this.background),this.knot.emit("afterDraw")},n.prototype.animate=function(t,e){function n(){var i=o.step();return i&&(o.grid=i,o.draw(),++r!==t)?o.nextFrame=requestAnimationFrame(n):(o.nextFrame=!1,e&&e(),void 0)}if("function"==typeof t&&(e=t,t=null),!this.nextFrame){var r=0,o=this;o.nextFrame=requestAnimationFrame(n)}},n.prototype.stop=function(){cancelAnimationFrame(this.nextFrame),this.nextFrame=!1,this.knot.emit("stop")},n.prototype.destroy=function(){var t=this.canvas;this.stop(),t.parentNode.removeChild(t),this.knot.emit("destroy")},e.exports=n},{"./creature.js":2,"./display.js":3,"./dom.js":4,"./util":6,"knot.js":9}],6:[function(t,e){t("../bower_components/seedrandom/seedrandom.js")("terra :)",{global:!0});var n=t("../lodash_custom/lodash.custom.min.js")._;n.getNeighborCoordsFn=function(t,e,n,r){return r?n?function(n,r,o){var i,u,a,c,f,s=[];for(u=-o;o>=u;++u)for(f=o-Math.abs(u),c=-f;f>=c;++c)i=((u+n)%t+t)%t,a=((c+r)%e+e)%e,(i!==n||a!==r)&&s.push({x:i,y:a});return s}:function(n,r,o){var i,u,a,c,f,s,l=[];for(u=n-o,f=r-o,a=n+o,s=r+o,i=u;a>=i;++i)for(c=f;s>=c;++c)(i!==n||c!==r)&&l.push({x:(i%t+t)%t,y:(c%e+e)%e});return l}:(t-=1,e-=1,n?function(n,r,o){var i,u,a,c,f,s=[];for(u=-o;o>=u;++u)for(f=o-Math.abs(u),c=-f;f>=c;++c)i=u+n,a=c+r,i>=0&&a>=0&&t>=i&&e>=a&&(i!==n||a!==r)&&s.push({x:i,y:a});return s}:function(n,r,o){var i,u,a,c,f,s,l=[];for(u=Math.max(0,n-o),f=Math.max(0,r-o),a=Math.min(n+o,t),s=Math.min(r+o,e),i=u;a>=i;++i)for(c=f;s>=c;++c)(i!==n||c!==r)&&l.push({x:i,y:c});return l})},n.pickRandomWeighted=function(t){var e,r,o=0,i=n.random(100,!0);for(r=0,_len=t.length;_len>r;r++)if(e=t[r],o+=e[1],o>i)return e[0];return!1},e.exports=n},{"../bower_components/seedrandom/seedrandom.js":7,"../lodash_custom/lodash.custom.min.js":8}],7:[function(e,n){!function(t,e,n,r,o,i,u,a,c){function f(t){var e,n=t.length,o=this,i=0,u=o.i=o.j=0,a=o.S=[];for(n||(t=[n++]);r>i;)a[i]=i++;for(i=0;r>i;i++)a[i]=a[u=v&u+t[i%n]+(e=a[i])],a[u]=e;(o.g=function(t){for(var e,n=0,i=o.i,u=o.j,a=o.S;t--;)e=a[i=v&i+1],n=n*r+a[v&(a[i]=a[u=v&u+e])+(a[u]=e)];return o.i=i,o.j=u,n})(r)}function s(t,e){var n,r=[],o=typeof t;if(e&&"object"==o)for(n in t)try{r.push(s(t[n],e-1))}catch(i){}return r.length?r:"string"==o?t:t+"\x00"}function l(t,e){for(var n,r=t+"",o=0;o<r.length;)e[v&o]=v&(n^=19*e[v&o])+r.charCodeAt(o++);return h(e)}function p(n){try{return t.crypto.getRandomValues(n=new Uint8Array(r)),h(n)}catch(o){return[+new Date,t,(n=t.navigator)&&n.plugins,t.screen,h(e)]}}function h(t){return String.fromCharCode.apply(0,t)}var d=n.pow(r,o),y=n.pow(2,i),g=2*y,v=r-1,m=n["seed"+c]=function(t,i,u){var a=[];i=1==i?{entropy:!0}:i||{};var v=l(s(i.entropy?[t,h(e)]:null==t?p():t,3),a),m=new f(a);return l(h(m.S),e),(i.pass||u||function(t,e,r){return r?(n[c]=t,e):t})(function(){for(var t=m.g(o),e=d,n=0;y>t;)t=(t+n)*r,e*=r,n=m.g(1);for(;t>=g;)t/=2,e/=2,n>>>=1;return(t+n)/e},v,"global"in i?i.global:this==n)};l(n[c](),e),u&&u.exports?u.exports=m:a&&a.amd&&a(function(){return m})}(this,[],Math,256,6,52,"object"==typeof n&&n,"function"==typeof t&&t,"random")},{}],8:[function(t,e,n){(function(t){(function(){function r(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}function o(t){t.length=0,A.length<R&&A.push(t)}function i(t,e){var n;e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);var r=-1;n=n-e||0;for(var o=Array(0>n?0:n);++r<n;)o[r]=t[e+r];return o}function u(){}function a(t){function e(){if(r){var t=i(r);fe.apply(t,arguments)}if(this instanceof e){var u=f(n.prototype),t=n.apply(u,t||arguments);return m(t)?t:u}return n.apply(o,t||arguments)}var n=t[0],r=t[2],o=t[4];return xe(e,t),e}function c(t,e,n,u,a){if(n){var f=n(t);if("undefined"!=typeof f)return f}if(!m(t))return t;var s=oe.call(t);if(!W[s]||!we.nodeClass&&r(t))return t;var l=me[s];switch(s){case I:case q:return new l(+t);case G:case $:return new l(t);case K:return f=l(t.source,P.exec(t)),f.lastIndex=t.lastIndex,f}if(s=je(t),e){var p=!u;u||(u=A.pop()||[]),a||(a=A.pop()||[]);for(var h=u.length;h--;)if(u[h]==t)return a[h];f=s?l(t.length):{}}else f=s?i(t):Fe({},t);return s&&(ce.call(t,"index")&&(f.index=t.index),ce.call(t,"input")&&(f.input=t.input)),e?(u.push(t),a.push(f),(s?_e:Se)(t,function(t,r){f[r]=c(t,e,n,u,a)}),p&&(o(u),o(a)),f):f}function f(t){return m(t)?he(t):{}}function s(t,e,n){if("function"!=typeof t)return F;if("undefined"==typeof e||!("prototype"in t))return t;var r=t.__bindData__;if("undefined"==typeof r&&(we.funcNames&&(r=!t.name),r=r||!we.funcDecomp,!r)){var o=ae.call(t);we.funcNames||(r=!N.test(o)),r||(r=M.test(o),xe(t,r))}if(!1===r||!0!==r&&1&r[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)}}return _(t,e)}function l(t){function e(){var t=s?a:this;if(o){var g=i(o);fe.apply(g,arguments)}return(u||h)&&(g||(g=i(arguments)),u&&fe.apply(g,u),h&&g.length<c)?(r|=16,l([n,d?r:-4&r,g,null,a,c])):(g||(g=arguments),p&&(n=t[y]),this instanceof e?(t=f(n.prototype),g=n.apply(t,g),m(g)?g:t):n.apply(t,g))}var n=t[0],r=t[1],o=t[2],u=t[3],a=t[4],c=t[5],s=1&r,p=2&r,h=4&r,d=8&r,y=n;return xe(e,t),e}function p(t,e,n,i,u,a){if(n){var c=n(t,e);if("undefined"!=typeof c)return!!c}if(t===e)return 0!==t||1/t==1/e;if(t===t&&!(t&&H[typeof t]||e&&H[typeof e]))return!1;if(null==t||null==e)return t===e;var f=oe.call(t),s=oe.call(e);if(f==L&&(f=U),s==L&&(s=U),f!=s)return!1;switch(f){case I:case q:return+t==+e;case G:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case K:case $:return t==e+""}if(s=f==z,!s){var l=ce.call(t,"__wrapped__"),h=ce.call(e,"__wrapped__");if(l||h)return p(l?t.__wrapped__:t,h?e.__wrapped__:e,n,i,u,a);if(f!=U||!we.nodeClass&&(r(t)||r(e)))return!1;if(f=!we.argsObject&&g(t)?Object:t.constructor,l=!we.argsObject&&g(e)?Object:e.constructor,f!=l&&!(v(f)&&f instanceof f&&v(l)&&l instanceof l)&&"constructor"in t&&"constructor"in e)return!1}for(f=!u,u||(u=A.pop()||[]),a||(a=A.pop()||[]),l=u.length;l--;)if(u[l]==t)return a[l]==e;var d=0,c=!0;if(u.push(t),a.push(e),s){if(l=t.length,d=e.length,(c=d==l)||i)for(;d--;)if(s=l,h=e[d],i)for(;s--&&!(c=p(t[s],h,n,i,u,a)););else if(!(c=p(t[d],h,n,i,u,a)))break}else Oe(e,function(e,r,o){return ce.call(o,r)?(d++,c=ce.call(t,r)&&p(t[r],e,n,i,u,a)):void 0}),c&&!i&&Oe(t,function(t,e,n){return ce.call(n,e)?c=-1<--d:void 0});return u.pop(),a.pop(),f&&(o(u),o(a)),c}function h(t,e,n,r,o,u){var c=1&e,f=4&e,s=16&e,p=32&e;if(!(2&e||v(t)))throw new TypeError;s&&!n.length&&(e&=-17,s=n=!1),p&&!r.length&&(e&=-33,p=r=!1);var d=t&&t.__bindData__;return d&&!0!==d?(d=i(d),d[2]&&(d[2]=i(d[2])),d[3]&&(d[3]=i(d[3])),!c||1&d[1]||(d[4]=o),!c&&1&d[1]&&(e|=8),!f||4&d[1]||(d[5]=u),s&&fe.apply(d[2]||(d[2]=[]),n),p&&le.apply(d[3]||(d[3]=[]),r),d[1]|=e,h.apply(null,d)):(1==e||17===e?a:l)([t,e,n,r,o,u])}function d(){V.h=B,V.b=V.c=V.g=V.i="",V.e="t",V.j=!0;for(var t,e=0;t=arguments[e];e++)for(var n in t)V[n]=t[n];e=V.a,V.d=/^[^,]+/.exec(e)[0],t=Function,e="return function("+e+"){",n=V;var r="var n,t="+n.d+",E="+n.e+";if(!t)return E;"+n.i+";";n.b?(r+="var u=t.length;n=-1;if("+n.b+"){",we.unindexedChars&&(r+="if(s(t)){t=t.split('')}"),r+="while(++n<u){"+n.g+";}}else{"):we.nonEnumArgs&&(r+="var u=t.length;n=-1;if(u&&p(t)){while(++n<u){n+='';"+n.g+";}}else{"),we.enumPrototypes&&(r+="var G=typeof t=='function';"),we.enumErrorProps&&(r+="var F=t===k||t instanceof Error;");var o=[];if(we.enumPrototypes&&o.push('!(G&&n=="prototype")'),we.enumErrorProps&&o.push('!(F&&(n=="message"||n=="name"))'),n.j&&n.f)r+="var C=-1,D=B[typeof t]&&v(t),u=D?D.length:0;while(++C<u){n=D[C];",o.length&&(r+="if("+o.join("&&")+"){"),r+=n.g+";",o.length&&(r+="}"),r+="}";else if(r+="for(n in t){",n.j&&o.push("m.call(t, n)"),o.length&&(r+="if("+o.join("&&")+"){"),r+=n.g+";",o.length&&(r+="}"),r+="}",we.nonEnumShadows){for(r+="if(t!==A){var i=t.constructor,r=t===(i&&i.prototype),f=t===J?I:t===k?j:L.call(t),x=y[f];",k=0;7>k;k++)r+="n='"+n.h[k]+"';if((!(r&&x[n])&&m.call(t,n))",n.j||(r+="||(!x[n]&&t[n]!==A[n])"),r+="){"+n.g+"}";r+="}"}return(n.b||we.nonEnumArgs)&&(r+="}"),r+=n.c+";return E",t("d,j,k,m,o,p,q,s,v,A,B,y,I,J,L",e+r+"}")(s,T,ee,ce,D,g,je,b,V.f,ne,H,be,$,re,oe)}function y(t){return"function"==typeof t&&ie.test(t)}function g(t){return t&&"object"==typeof t&&"number"==typeof t.length&&oe.call(t)==L||!1}function v(t){return"function"==typeof t}function m(t){return!(!t||!H[typeof t])}function b(t){return"string"==typeof t||t&&"object"==typeof t&&oe.call(t)==$||!1}function w(t,e,n){var r=[];if(e=u.createCallback(e,n,3),je(t)){n=-1;for(var o=t.length;++n<o;){var i=t[n];e(i,n,t)&&r.push(i)}}else _e(t,function(t,n,o){e(t,n,o)&&r.push(t)});return r}function x(t,e,n){if(e&&"undefined"==typeof n&&je(t)){n=-1;for(var r=t.length;++n<r&&!1!==e(t[n],n,t););}else _e(t,e,n);return t}function j(t,e,n){var r=-1,o=t?t.length:0,i=Array("number"==typeof o?o:0);if(e=u.createCallback(e,n,3),je(t))for(;++r<o;)i[r]=e(t[r],r,t);else _e(t,function(t,n,o){i[++r]=e(t,n,o)});return i}function E(t,e,n,r){var o=3>arguments.length;if(e=u.createCallback(e,r,4),je(t)){var i=-1,a=t.length;for(o&&(n=t[++i]);++i<a;)n=e(n,t[i],i,t)}else _e(t,function(t,r,i){n=o?(o=!1,t):e(n,t,r,i)});return n}function C(t,e,n){var r;if(e=u.createCallback(e,n,3),je(t)){n=-1;for(var o=t.length;++n<o&&!(r=e(t[n],n,t)););}else _e(t,function(t,n,o){return!(r=e(t,n,o))});return!!r}function _(t,e){return 2<arguments.length?h(t,17,i(arguments,2),null,e):h(t,1,null,null,e)}function F(t){return t}function O(){}function S(t){return function(e){return e[t]}}var A=[],D={},R=40,P=/\w*$/,N=/^\s*function[ \n\r\t]+\w/,M=/\bthis\b/,B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),L="[object Arguments]",z="[object Array]",I="[object Boolean]",q="[object Date]",T="[object Error]",G="[object Number]",U="[object Object]",K="[object RegExp]",$="[object String]",W={"[object Function]":!1};W[L]=W[z]=W[I]=W[q]=W[G]=W[U]=W[K]=W[$]=!0;var J={configurable:!1,enumerable:!1,value:null,writable:!1},V={a:"",b:null,c:"",d:"",e:"",v:null,g:"",h:null,support:null,i:"",j:!1},H={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Q=H[typeof window]&&window||this,X=H[typeof n]&&n&&!n.nodeType&&n,Y=H[typeof e]&&e&&!e.nodeType&&e,Z=H[typeof t]&&t;!Z||Z.global!==Z&&Z.window!==Z||(Q=Z);var te=[],ee=Error.prototype,ne=Object.prototype,re=String.prototype,oe=ne.toString,ie=RegExp("^"+(oe+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),ue=Math.floor,ae=Function.prototype.toString,ce=ne.hasOwnProperty,fe=te.push,se=ne.propertyIsEnumerable,le=te.unshift,pe=function(){try{var t={},e=y(e=Object.defineProperty)&&e,n=e(t,t,t)&&e}catch(r){}return n}(),he=y(he=Object.create)&&he,de=y(de=Array.isArray)&&de,ye=y(ye=Object.keys)&&ye,ge=Math.min,ve=Math.random,me={};me[z]=Array,me[I]=Boolean,me[q]=Date,me["[object Function]"]=Function,me[U]=Object,me[G]=Number,me[K]=RegExp,me[$]=String;var be={};be[z]=be[q]=be[G]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},be[I]=be[$]={constructor:!0,toString:!0,valueOf:!0},be[T]=be["[object Function]"]=be[K]={constructor:!0,toString:!0},be[U]={constructor:!0},function(){for(var t=B.length;t--;){var e,n=B[t];for(e in be)ce.call(be,e)&&!ce.call(be[e],n)&&(be[e][n]=!1)}}();var we=u.support={};!function(){function t(){this.x=1}var e={0:1,length:1},n=[];t.prototype={valueOf:1,y:1};for(var r in new t)n.push(r);for(r in arguments);we.argsClass=oe.call(arguments)==L,we.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),we.enumErrorProps=se.call(ee,"message")||se.call(ee,"name"),we.enumPrototypes=se.call(t,"prototype"),we.funcDecomp=!y(Q.k)&&M.test(function(){return this}),we.funcNames="string"==typeof Function.name,we.nonEnumArgs=0!=r,we.nonEnumShadows=!/valueOf/.test(n),we.spliceObjects=(te.splice.call(e,0,1),!e[0]),we.unindexedChars="xx"!="x"[0]+Object("x")[0];try{we.nodeClass=!(oe.call(document)==U&&!({toString:0}+""))}catch(o){we.nodeClass=!0}}(1),he||(f=function(){function t(){}return function(e){if(m(e)){t.prototype=e;var n=new t;t.prototype=null}return n||Q.Object()}}());var xe=pe?function(t,e){J.value=e,pe(t,"__bindData__",J)}:O;we.argsClass||(g=function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&ce.call(t,"callee")&&!se.call(t,"callee")||!1});var je=de||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&oe.call(t)==z||!1},Ee=d({a:"z",e:"[]",i:"if(!(B[typeof z]))return E",g:"E.push(n)"}),ke=ye?function(t){return m(t)?we.enumPrototypes&&"function"==typeof t||we.nonEnumArgs&&t.length&&g(t)?Ee(t):ye(t):[]}:Ee,Z={a:"g,e,K",i:"e=e&&typeof K=='undefined'?e:d(e,K,3)",b:"typeof u=='number'",v:ke,g:"if(e(t[n],n,g)===false)return E"},de={a:"z,H,l",i:"var a=arguments,b=0,c=typeof l=='number'?2:a.length;while(++b<c){t=a[b];if(t&&B[typeof t]){",v:ke,g:"if(typeof E[n]=='undefined')E[n]=t[n]",c:"}}"},Ce={i:"if(!B[typeof t])return E;"+Z.i,b:!1},_e=d(Z),Fe=d(de,{i:de.i.replace(";",";if(c>3&&typeof a[c-2]=='function'){var e=d(a[--c-1],a[c--],2)}else if(c>2&&typeof a[c-1]=='function'){e=a[--c]}"),g:"E[n]=e?e(E[n],t[n]):t[n]"}),Oe=d(Z,Ce,{j:!1}),Se=d(Z,Ce);v(/x/)&&(v=function(t){return"function"==typeof t&&"[object Function]"==oe.call(t)}),u.assign=Fe,u.bind=_,u.createCallback=function(t,e,n){var r=typeof t;if(null==t||"function"==r)return s(t,e,n);if("object"!=r)return S(t);var o=ke(t),i=o[0],u=t[i];return 1!=o.length||u!==u||m(u)?function(e){for(var n=o.length,r=!1;n--&&(r=p(e[o[n]],t[o[n]],null,!0)););return r}:function(t){return t=t[i],u===t&&(0!==u||1/u==1/t)}},u.filter=w,u.forEach=x,u.forIn=Oe,u.forOwn=Se,u.keys=ke,u.map=j,u.property=S,u.collect=j,u.each=x,u.extend=Fe,u.select=w,u.clone=function(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n=e,e=!1),c(t,e,"function"==typeof n&&s(n,r,1))},u.identity=F,u.isArguments=g,u.isArray=je,u.isFunction=v,u.isObject=m,u.isString=b,u.noop=O,u.random=function(t,e,n){var r=null==t,o=null==e;return null==n&&("boolean"==typeof t&&o?(n=t,t=1):o||"boolean"!=typeof e||(n=e,o=!0)),r&&o&&(e=1),t=+t||0,o?(e=t,t=0):e=+e||0,n||t%1||e%1?(n=ve(),ge(t+n*(e-t+parseFloat("1e-"+((n+"").length-1))),e)):t+ue(ve()*(e-t+1))},u.reduce=E,u.some=C,u.any=C,u.foldl=E,u.inject=E,u.VERSION="2.4.1",X&&Y&&(X._=u)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(e,n,r){(function(o){!function(e){if("object"==typeof r&&"undefined"!=typeof n)n.exports=e();else if("function"==typeof t&&t.amd)t([],e);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof o?o:"undefined"!=typeof self?self:this,i.Knot=e()}}(function(){return function t(n,r,o){function i(a,c){if(!r[a]){if(!n[a]){var f="function"==typeof e&&e;if(!c&&f)return f(a,!0);if(u)return u(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var l=r[a]={exports:{}};n[a][0].call(l.exports,function(t){var e=n[a][1][t];return i(e?e:t)},l,l.exports,t,n,r,o)}return r[a].exports}for(var u="function"==typeof e&&e,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return t.events={},t.on=function(e,n){return t.events[e]=t.events[e]||[],t.events[e].push(n),t},t.once=function(e,n){return n._once=!0,t.on(e,n),t},t.off=function(e,n){return 2===arguments.length?t.events[e].splice(t.events[e].indexOf(n),1):delete t.events[e],t},t.emit=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;n>o;o++)r[o-1]=arguments[o];var i=t.events[e]&&t.events[e].slice();return i&&i.forEach(function(n){n._once&&t.off(e,n),n.apply(t,r)}),t},t},e.exports=n["default"]},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});